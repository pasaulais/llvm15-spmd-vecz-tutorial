%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\talksection{Overview}

\begin{frame}{Structure}

\begin{itemize}
    \item Pipeline design
    \begin{itemize}
        \item $F$ is repeatedly transformed by different stages
        \item Stages are independent of each other
        \item Each stage consists of one or more IR passes
        \item Most stages require some analysis
    \end{itemize}
    \item Analyses
    \begin{itemize}
        \item Capture information about the IR to vectorize
        \item May need updating after a stage (stale information)
        \item May depend on other analyses
    \end{itemize}
\end{itemize}

\center{\includegraphics[width=0.8\textwidth]{images/stages.pdf}}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}{Analysis Examples}

\begin{itemize}
    \item Uniform Value Analysis
    \begin{itemize}
        \item Marks values as either \uniform{uniform} or \varying{varying}
    \end{itemize}

    \item Divergence Analysis
    \begin{itemize}
        \item Determines which basic blocks are \varying{divergent}
        \item Depends on UVA
    \end{itemize}
    
    \item SIMD Width Analysis
    \begin{itemize}
        \item Chooses a 'good' width $N$ based on register/instruction usage
        \item Depends on UVA
    \end{itemize}
    
    \item ...
\end{itemize}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}{Implementation Level: IR or MI?}

\begin{itemize}
    \item IR
        \\ \pointfor{Use-def graph and RAUW make for straightforward graph transformations}
        \\ \pointfor{Easy to target multiple platforms}
        \\ \pointunkn{Generally higher-level (simpler implementation?)}
        \\ \pointagainst{Platform-specific features more difficult to use}
        \\ \pointagainst{SIMD predication only for a few operations (select, load/stores)}

    \item MachineInstr (i.e. backend level)
        \\ \pointfor{Easy to use platform-specific features (e.g. predication, mask registers)}
        \\ \pointunkn{Generally lower-level (more powerful?)}
        \\ \pointagainst{More platform-specific code}
        \\ \pointagainst{Graph-based transformations not as straightforward}
    \item Both?
    \begin{itemize}
        \item Transformations at IR level, generating CFG-specific metadata
        \item Use metadata in backend to do MI-level predication
    \end{itemize}
\end{itemize}

\end{frame}
